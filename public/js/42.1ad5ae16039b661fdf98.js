(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1434:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(46),l=r.n(n);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={name:"searchFormVehicle",data:function(){return{search:{from:null,to:null,internal_number:null,car_plate:null,settled_city:null}}},methods:s(s(s({},Object(a.b)("report",["getReportVehicles"])),Object(a.d)("report",["ADD_REQUEST"])),{},{resetFilter:function(){this.search=l()(this.search,(function(){return null})),this.ADD_REQUEST(this.search)},submit:function(){this.ADD_REQUEST(this.search),this.getReportVehicles(this.search)}}),computed:s({},Object(a.c)("vehicle",["settledCities"]))},u=r(2),b=Object(u.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[r("b-row",[r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Desde","label-for":"from"}},[r("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"from"},model:{value:e.search.from,callback:function(t){e.$set(e.search,"from",t)},expression:"search.from"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Hasta","label-for":"to"}},[r("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"to"},model:{value:e.search.to,callback:function(t){e.$set(e.search,"to",t)},expression:"search.to"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"4"}},[r("b-form-group",{attrs:{label:"Numero interno","label-for":"internal_number"}},[r("b-form-input",{staticClass:"mb-2",attrs:{id:"internal_number"},model:{value:e.search.internal_number,callback:function(t){e.$set(e.search,"internal_number",t)},expression:"search.internal_number"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"4"}},[r("b-form-group",{attrs:{label:"Placa"}},[r("b-form-input",{staticClass:"mb-2",attrs:{label:"Nombres"},model:{value:e.search.car_plate,callback:function(t){e.$set(e.search,"car_plate","string"==typeof t?t.trim():t)},expression:"search.car_plate"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"4"}},[r("b-form-group",{attrs:{label:"CIUDAD RADICADO","label-for":"settledCities"}},[r("b-form-select",{attrs:{options:e.settledCities,id:"settledCities"},model:{value:e.search.settled_city,callback:function(t){e.$set(e.search,"settled_city",t)},expression:"search.settled_city"}})],1)],1),e._v(" "),r("b-col",{staticClass:"mt-4 text-right",attrs:{md:"12"}},[r("b-button",{staticClass:"mr-4",attrs:{variant:"danger"},on:{click:e.resetFilter}},[e._v("Reestablecer filtros")]),e._v(" "),r("b-button",{attrs:{variant:"primary",type:"submit"}},[e._v("Generar reporte")])],1)],1)],1)}),[],!1,null,"5667dab8",null).exports,f=r(1),m=r.n(f),d=r(4),p=r.n(d),h={name:"documentsTable",props:["documents"],data:function(){return{fields:[{key:"type",label:"Documento"},{key:"number",label:"Numero"},{key:"expiration_date",label:"Fecha de expiración"}]}}},v=Object(u.a)(h,(function(){var e=this.$createElement;return(this._self._c||e)("b-table",{attrs:{bordered:"",fields:this.fields,items:this.documents}})}),[],!1,null,null,null).exports,_={name:"affiliatesTable",props:["affiliates"],data:function(){return{fields:[{key:"full_name",label:"Nombre"},{key:"phone_number",label:"Telefono"},{key:"email",label:"Correo"}]}}},w=Object(u.a)(_,(function(){var e=this.$createElement;return(this._self._c||e)("b-table",{attrs:{bordered:"",fields:this.fields,items:this.affiliates}})}),[],!1,null,null,null).exports;function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t,r,a,n,l,o){try{var s=e[l](o),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(a,n)}var g=r(20),D={name:"searchListVehicle",components:{documentsTable:v,affiliatesTable:w},data:function(){return{columns:[{label:"Placa",field:"car_plate"},{label:"Numero interno",field:"internal_number"},{label:"Vinculación a la empresa",field:"date_association_company"},{label:"Número chasis",field:"chassis_number"},{label:"Número de motor",field:"engine_number"},{label:"Modelo",field:"model"},{label:"Marca",field:"brand"},{label:"Número de puestos",field:"number_seats"},{label:"Fecha matricula",field:"enrollment_date"},{label:"Clase de auto",field:"auto_type"},{label:"Afiliados",field:"affiliates"},{label:"Documentos",field:"documents"}],currentAffiliates:[],currentDocuments:[]}},methods:{exportData:function(){var e,t=this;return(e=m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/reports-vehicles-excel",t.request,{responseType:"blob"}).then((function(e){g(e.data,"reporte-vehiculos.xlsx")}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(a,n){var l=e.apply(t,r);function o(e){j(l,a,n,o,s,"next",e)}function s(e){j(l,a,n,o,s,"throw",e)}o(void 0)}))})()},showModalAffiliates:function(e){this.currentAffiliates=e,this.$refs["modal-affiliates"].show()},showModalDocumments:function(e){this.currentDocuments=e,this.$refs["modal-documents"].show()}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(a.e)("report",["vehicles","request"]))},k={name:"vehicles-report",components:{searchFormVehicle:b,searchList:Object(u.a)(D,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"mt-4"},[r("vue-good-table",{attrs:{columns:e.columns,"line-numbers":!1,"search-options":{enabled:!0,placeholder:"Buscar..."},"pagination-options":{enabled:!0,mode:"records"},styleClass:"tableOne vgt-table",rows:e.vehicles},scopedSlots:e._u([{key:"table-row",fn:function(t){return["affiliates"==t.column.field?r("span",[r("b-button",{attrs:{variant:"outline-primary",size:"sm"},on:{click:function(r){return e.showModalAffiliates(t.row.users)}}},[e._v("Ver")])],1):"documents"==t.column.field?r("span",[r("b-button",{attrs:{variant:"outline-primary",size:"sm"},on:{click:function(r){return e.showModalDocumments(t.row.documentations)}}},[e._v("Ver")])],1):e._e()]}}])}),e._v(" "),r("b-modal",{ref:"modal-affiliates",attrs:{centered:"",title:"Afiliados"}},[r("affiliates-table",{attrs:{affiliates:e.currentAffiliates}})],1),e._v(" "),r("b-modal",{ref:"modal-documents",attrs:{centered:"",title:"Documentación"}},[r("documents-table",{attrs:{documents:e.currentDocuments}})],1),e._v(" "),e.vehicles.length?r("div",{staticClass:"text-right mt-4"},[r("b-button",{attrs:{variant:"success"},on:{click:e.exportData}},[e._v("Exportar "),r("i",{staticClass:"i-File-Excel ml-2"})])],1):e._e()],1)}),[],!1,null,"0734d762",null).exports},metaInfo:{title:"Reporte de vehiculos"}},x=Object(u.a)(k,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"main-content"},[t("breadcumb",{attrs:{page:"Reporte de vehiculos",folder:"reportes"}}),this._v(" "),t("search-form-vehicle"),this._v(" "),t("search-list")],1)}),[],!1,null,"fd4624ae",null);t.default=x.exports},20:function(e,t){e.exports=function(e,t,r,a){var n=new Blob(void 0!==a?[a,e]:[e],{type:r||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,t);else{var l=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(n):window.webkitURL.createObjectURL(n),o=document.createElement("a");o.style.display="none",o.href=l,o.setAttribute("download",t),void 0===o.download&&o.setAttribute("target","_blank"),document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(l)}),200)}}}}]);