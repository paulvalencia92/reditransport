(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1479:function(e,t,r){"use strict";r.r(t);var a=r(1),o=r.n(a);function n(e,t,r,a,o,n,i){try{var s=e[n](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var i=e.apply(t,r);function s(e){n(i,a,o,s,l,"next",e)}function l(e){n(i,a,o,s,l,"throw",e)}s(void 0)}))}}var s={name:"list",created:function(){this.getRequests()},data:function(){return{requests:[],columns:[{label:"Dueño",field:"owner"},{label:"Conductor",field:"driver"},{label:"Documentacion",field:"documentations"},{label:"Placa",field:"car_plate"},{label:"Numero interno",field:"internal_number"},{label:"Número chasis",field:"chassis_number"},{label:"Numero de motor",field:"engine_number"},{label:"Modelo",field:"model"},{label:"Marca",field:"brand"},{label:"Cilindraje",field:"cylinder"},{label:"Color",field:"color"},{label:"Clase de auto",field:"auto_type"},{label:"Número de puestos",field:"number_seats"},{label:"Acciones",field:"actions"}],owner:{},driver:{},documents:{}}},methods:{getRequests:function(){var e=this;return i(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/requests");case 2:r=t.sent,e.requests=r.data;case 4:case"end":return t.stop()}}),t)})))()},showModalOwner:function(e){this.owner=e,this.$refs["modal-owner"].show()},showModalDriver:function(e){this.driver=e,this.$refs["modal-driver"].show()},showModalDocuments:function(e){this.documents=e,this.$refs["modal-documents"].show()},showModalApproveRequest:function(e){var t=this;this.$bvModal.msgBoxConfirm("una vez ejecutada la acción no podra revertir los cambios",{title:"¿Está seguro que desea aceptar la solicitud?",size:"sm",buttonSize:"sm",okVariant:"primary",okTitle:"Aceptar",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(r){1==r&&t.approveRequest(e).then((function(e){e.data.startsWith("SQLSTATE")?openNotification("Solicitud no aprobada","El vehículo o el usuario ya se encuentran registrados","danger"):(openNotification("Solicitud aprobada","Se ha aprobado la solicitud"),t.$router.push({name:"vehiculos"}))}))}))},showModalDelete:function(e){var t=this;this.$bvModal.msgBoxConfirm("una vez ejecutada la acción no podra revertir los cambios",{title:"¿Está seguro que desea aceptar la solicitud?",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"Eliminar",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(r){t.deleteRequest(e).then((function(e){openNotification("Solicitud eliminada","Se ha eliminado la solicitud"),t.getRequests()}))}))},approveRequest:function(e){return i(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.post("/api/approve-request",e);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},deleteRequest:function(e){return i(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/delete-request/delete/".concat(e));case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()}}},l=r(2),c=Object(l.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-content"},[r("breadcumb",{attrs:{page:"Solicitudes pre registro",folder:"Principal"}}),e._v(" "),r("b-card",[r("vue-good-table",{attrs:{columns:e.columns,"line-numbers":!1,"search-options":{enabled:!0,placeholder:"Search this table"},"pagination-options":{enabled:!0,mode:"records"},styleClass:"tableOne vgt-table",rows:e.requests},scopedSlots:e._u([{key:"table-row",fn:function(t){return["owner"==t.column.field?r("div",[r("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(r){return e.showModalOwner(t.row)}}},[e._v("Ver")])],1):"driver"==t.column.field?r("div",[r("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(r){return e.showModalDriver(t.row)}}},[e._v("Ver")])],1):"documentations"==t.column.field?r("div",[r("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(r){return e.showModalDocuments(t.row)}}},[e._v("Ver")])],1):"actions"==t.column.field?r("div",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(r){return e.showModalApproveRequest(t.row)}}},[e._v("Aprobar")]),e._v(" "),r("a",{staticClass:"clickeable pt-2",on:{click:function(r){return e.showModalDelete(t.row.id)}}},[r("i",{staticClass:"i-Close-Window text-25 text-danger"})])],1):e._e()]}}])})],1),e._v(" "),r("b-modal",{ref:"modal-owner",attrs:{title:"Información del dueño"}},[r("b-list-group",[r("b-list-group-item",[r("b",[e._v("Nombre: ")]),e._v(e._s(e.owner.names)+" "+e._s(e.owner.surnames))]),e._v(" "),r("b-list-group-item",[r("b",[e._v("Identificacion: ")]),e._v(e._s(e.owner.identification_number))]),e._v(" "),r("b-list-group-item",[r("b",[e._v("Fecha de nacimiento: ")]),e._v(e._s(e.owner.date_of_birth))]),e._v(" "),r("b-list-group-item",[r("b",[e._v("Sexo: ")]),e._v(e._s(e.owner.sex))]),e._v(" "),r("b-list-group-item",[r("b",[e._v("Direccion residencial ")]),e._v(e._s(e.owner.residence_address))]),e._v(" "),r("b-list-group-item",[r("b",[e._v("Telefono: ")]),e._v(e._s(e.owner.phone_number))]),e._v(" "),r("b-list-group-item",[r("b",[e._v("Correo electronico: ")]),e._v(e._s(e.owner.email))]),e._v(" "),r("b-list-group-item",{staticClass:"d-flex justify-content-between"},[r("b",[e._v("Cedula: ")]),e._v(" "),r("a",{staticClass:"btn btn-primary btn-xs",attrs:{href:"/storage/cedulas/"+e.owner.file_cc,download:""}},[e._v("Descargar")])])],1)],1),e._v(" "),r("b-modal",{ref:"modal-driver",attrs:{title:"Información del conductor"}},[r("b-list-group",[r("b-list-group-item",[r("b",[e._v("Nombre: ")]),e._v(e._s(e.driver.names_driver)+" "+e._s(e.driver.surnames_driver))]),e._v(" "),r("b-list-group-item",[r("b",[e._v("Identificacion: ")]),e._v(e._s(e.driver.identification_number_driver))]),e._v(" "),r("b-list-group-item",[r("b",[e._v("Fecha de nacimiento: ")]),e._v(e._s(e.driver.date_of_birth_driver))]),e._v(" "),r("b-list-group-item",[r("b",[e._v("Sexo: ")]),e._v(e._s(e.driver.sex_driver))]),e._v(" "),r("b-list-group-item",[r("b",[e._v("Direccion residencial ")]),e._v(e._s(e.driver.residence_address_driver))]),e._v(" "),r("b-list-group-item",[r("b",[e._v("Telefono: ")]),e._v(e._s(e.driver.residence_address_driver))]),e._v(" "),r("b-list-group-item",[r("b",[e._v("Correo electronico: ")]),e._v(e._s(e.driver.email_driver))]),e._v(" "),r("b-list-group-item",[r("a",{staticClass:"btn btn-primary btn-xs",attrs:{href:"/storage/cedulas/"+e.driver.file_cc_driver,download:""}},[e._v("Cedula")]),e._v(" "),r("a",{staticClass:"btn btn-primary btn-xs",attrs:{href:"/storage/licensetrasn/"+e.driver.file_license,download:""}},[e._v("Licencia")])])],1)],1),e._v(" "),r("b-modal",{ref:"modal-documents",attrs:{title:"Documentos del vehiculoi"}},[r("b-list-group",[r("b-list-group-item",{staticClass:"d-flex justify-content-between"},[r("b",[e._v("Soat: ")]),e._v(" "),r("a",{staticClass:"btn btn-primary btn-xs",attrs:{href:"/storage/documents/"+e.documents.soat,download:""}},[e._v("Descargar")])]),e._v(" "),r("b-list-group-item",{staticClass:"d-flex justify-content-between"},[r("b",[e._v("Contractual: ")]),e._v(" "),r("a",{staticClass:"btn btn-primary btn-xs",attrs:{href:"/storage/documents/"+e.documents.contractual,download:""}},[e._v("Descargar")])]),e._v(" "),r("b-list-group-item",{staticClass:"d-flex justify-content-between"},[r("b",[e._v("Extra Contractual: ")]),e._v(" "),r("a",{staticClass:"btn btn-primary btn-xs",attrs:{href:"/storage/documents/"+e.documents.extra_contractual,download:""}},[e._v("Descargar")])]),e._v(" "),r("b-list-group-item",{staticClass:"d-flex justify-content-between"},[r("b",[e._v("Tarjeta Operacion: ")]),e._v(" "),r("a",{staticClass:"btn btn-primary btn-xs",attrs:{href:"/storage/documents/"+e.documents.tarjeta_operacion,download:""}},[e._v("Descargar")])]),e._v(" "),r("b-list-group-item",{staticClass:"d-flex justify-content-between"},[r("b",[e._v("Tecnomecanica: ")]),e._v(" "),r("a",{staticClass:"btn btn-primary btn-xs",attrs:{href:"/storage/documents/"+e.documents.tecnomecanica,download:""}},[e._v("Descargar")])])],1)],1)],1)}),[],!1,null,"69d46afa",null);t.default=c.exports}}]);