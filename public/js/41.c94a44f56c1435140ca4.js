(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{1444:function(e,t,r){"use strict";r.r(t);var o=r(0);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={name:"searchFormDocuments",created:function(){this.draft=clone(this.search)},data:function(){return{search:{associate:"todos",defeated:null,documents:[]},draft:{},options:[{text:"Sin Asociar ",value:"sin-asociar"},{text:"Todos",value:"todos"}]}},methods:a(a(a({},Object(o.d)("report",["ADD_REQUEST","CLEAR_DATA"])),Object(o.b)("report",["getReportDocuments"])),{},{submit:function(){this.ADD_REQUEST(this.search),this.getReportDocuments(this.search)},resetFilter:function(){this.search=clone(this.draft),this.ADD_REQUEST(this.search),this.CLEAR_DATA("documents")}}),computed:a({},Object(o.c)("vehicleDocument",["types"]))},i=r(2),l=Object(i.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[r("b-row",[r("b-col",{attrs:{md:"12"}},[r("b-row",[r("b-col",{attrs:{md:"3"}},[r("b-form-group",{attrs:{label:"Vehiculos con usuarios asociados"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.ariaDescribedby;return[r("b-form-radio-group",{attrs:{id:"associate",options:e.options,"aria-describedby":o,name:"associate"},model:{value:e.search.associate,callback:function(t){e.$set(e.search,"associate",t)},expression:"search.associate"}})]}}])})],1),e._v(" "),r("b-col",{attrs:{md:"3"}},[r("b-form-group",{staticClass:"mt-4"},[r("b-form-checkbox",{attrs:{id:"checkbox-1",name:"defeated",value:!0,"unchecked-value":!1},model:{value:e.search.defeated,callback:function(t){e.$set(e.search,"defeated",t)},expression:"search.defeated"}},[e._v("\n              Documentos Vencidos\n            ")])],1)],1)],1)],1),e._v(" "),r("b-col",{attrs:{md:"12"}},[r("b-form-group",{attrs:{label:"Documentos:"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.ariaDescribedby;return[r("b-form-checkbox-group",{attrs:{id:"documents",options:e.types,"aria-describedby":o,name:"documents"},model:{value:e.search.documents,callback:function(t){e.$set(e.search,"documents",t)},expression:"search.documents"}})]}}])}),e._v(" "),e.search.documents.length?e._e():r("span",{staticClass:"text-danger mt-2"},[e._v("Elija por lo menos un documento")])],1),e._v(" "),r("b-col",{staticClass:"mt-4 text-right",attrs:{md:"12"}},[r("b-button",{staticClass:"mr-4",attrs:{variant:"danger"},on:{click:e.resetFilter}},[e._v("Reestablecer filtros")]),e._v(" "),r("b-button",{attrs:{disabled:!e.search.documents.length,variant:"primary",type:"submit"}},[e._v("Generar reporte")])],1)],1)],1)}),[],!1,null,"bbb7e162",null).exports,u=r(1),d=r.n(u),b=r(4),m=r.n(b),p=r(20),f=r.n(p);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t,r,o,n,a,s){try{var c=e[a](s),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(o,n)}var w={name:"searchListDocuments",data:function(){return{columns:[{label:"Placa",field:"car_plate"},{label:"Numero interno",field:"internal_number"},{label:"Chasis",field:"chassis_number"},{label:"Nro motor",field:"engine_number"},{label:"Marca",field:"brand"},{label:"Numero de puestos",field:"number_seats"},{label:"Fecha de matricula",field:"enrollment_date"},{label:"Clase de auto",field:"auto_type"}],currentVehicles:null}},methods:{exportData:function(){var e,t=this;return(e=d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/reports-documents-excel",t.request,{responseType:"blob"}).then((function(e){f()(e.data,"reporte-afiliados.xlsx")}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function s(e){O(a,o,n,s,c,"next",e)}function c(e){O(a,o,n,s,c,"throw",e)}s(void 0)}))})()}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(o.e)("report",["documents","request"]))},y={name:"reportDocuments",components:{searchFormDocuments:l,searchListDocuments:Object(i.a)(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"mt-4"},[r("vue-good-table",{attrs:{columns:e.columns,"line-numbers":!1,"search-options":{enabled:!0,placeholder:"Buscar..."},"pagination-options":{enabled:!0,mode:"records"},styleClass:"tableOne vgt-table",rows:e.documents}}),e._v(" "),e.documents.length?r("div",{staticClass:"text-right mt-4"},[r("b-button",{attrs:{variant:"success"},on:{click:e.exportData}},[e._v("Exportar "),r("i",{staticClass:"i-File-Excel ml-2"})])],1):e._e(),e._v(" "),r("b-modal",{ref:"modal-vehicles",attrs:{centered:"",title:"Vehiculos asociados al afiliado",size:"lg"}},[r("vehicles-table",{attrs:{vehicles:e.currentVehicles}})],1)],1)}),[],!1,null,"0afcdaf6",null).exports},metaInfo:{title:"Reporte de afiliados"}},g=Object(i.a)(y,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"main-content"},[t("breadcumb",{attrs:{page:"Reporte de documentos",folder:"reportes"}}),this._v(" "),t("search-form-documents"),this._v(" "),t("search-list-documents")],1)}),[],!1,null,"2e139658",null);t.default=g.exports},20:function(e,t){e.exports=function(e,t,r,o){var n=new Blob(void 0!==o?[o,e]:[e],{type:r||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,t);else{var a=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(n):window.webkitURL.createObjectURL(n),s=document.createElement("a");s.style.display="none",s.href=a,s.setAttribute("download",t),void 0===s.download&&s.setAttribute("target","_blank"),document.body.appendChild(s),s.click(),setTimeout((function(){document.body.removeChild(s),window.URL.revokeObjectURL(a)}),200)}}}}]);