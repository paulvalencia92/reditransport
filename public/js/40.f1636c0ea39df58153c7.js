(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1435:function(e,t,r){"use strict";r.r(t);var n=r(0);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={name:"searchFormAffiliate",created:function(){this.draft=clone(this.search)},data:function(){return{search:{from:null,to:null,identification_number:null,names:null},draft:{}}},methods:o(o(o({},Object(n.b)("report",["getReportDocuments"])),Object(n.d)("report",["ADD_REQUEST","CLEAR_DATA"])),{},{submit:function(){this.ADD_REQUEST(this.search),this.getReportDocuments(this.search)},resetFilter:function(){this.search=clone(this.draft),this.ADD_REQUEST(this.search),this.CLEAR_DATA("affiliates")}}),computed:o({},Object(n.c)("vehicleDocument",["types"]))},c=r(2),l=Object(c.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[r("b-row",[r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Desde","label-for":"from"}},[r("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"from"},model:{value:e.search.from,callback:function(t){e.$set(e.search,"from",t)},expression:"search.from"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Hasta","label-for":"to"}},[r("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"to"},model:{value:e.search.to,callback:function(t){e.$set(e.search,"to",t)},expression:"search.to"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Identificaci贸n","label-for":"identification_number"}},[r("b-form-input",{staticClass:"mb-2",attrs:{id:"identification_number"},model:{value:e.search.identification_number,callback:function(t){e.$set(e.search,"identification_number",t)},expression:"search.identification_number"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"6"}},[r("b-form-group",{attrs:{label:"Nombre afiliado","label-for":"names"}},[r("b-form-input",{staticClass:"mb-2",attrs:{id:"names"},model:{value:e.search.names,callback:function(t){e.$set(e.search,"names",t)},expression:"search.names"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"12"}},[r("b-form-group",{attrs:{label:"Documentos:"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.ariaDescribedby;return[r("b-form-checkbox-group",{attrs:{id:"documents",options:e.types,"aria-describedby":n,name:"documents"},model:{value:e.search.documents,callback:function(t){e.$set(e.search,"documents",t)},expression:"search.documents"}})]}}])})],1),e._v(" "),r("b-col",{staticClass:"mt-4 text-right",attrs:{md:"12"}},[r("b-button",{staticClass:"mr-4",attrs:{variant:"danger"},on:{click:e.resetFilter}},[e._v("Reestablecer filtros")]),e._v(" "),r("b-button",{attrs:{variant:"primary",type:"submit"}},[e._v("Generar reporte")])],1)],1)],1)}),[],!1,null,"9b5c35bc",null).exports,u=r(1),b=r.n(u),d={name:"documentsTable",props:["documents"],data:function(){return{fields:[{key:"type",label:"Tipo de documento"},{key:"expiration_date",label:"Expiraci贸n"},{key:"number",label:"Numero de documento"},{key:"identity_name",label:"Entidad"}]}}},f={name:"vehiclesTable",components:{documentsTable:Object(c.a)(d,(function(){var e=this.$createElement;return(this._self._c||e)("b-table",{attrs:{bordered:"",fields:this.fields,items:this.documents}})}),[],!1,null,"cb5ecae0",null).exports},props:["vehicles"],data:function(){return{fields:[{key:"car_plate",label:"Placa"},{key:"brand",label:"Marca"},{key:"color",label:"Color"},{key:"number_seats",label:"Numero de puestos"},{key:"auto_type",label:"Tipo de auto"},{key:"documents",label:"Documentos"}],currentDocuments:[]}},methods:{showModalDocuments:function(e){this.currentDocuments=e,this.$refs["modal-documents"].show()}}},m=Object(c.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-table",{attrs:{bordered:"",fields:e.fields,items:e.vehicles},scopedSlots:e._u([{key:"cell(documents)",fn:function(t){return[t.item.documentations.length?r("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(r){return e.showModalDocuments(t.item.documentations)}}},[e._v("Ver\n      ")]):r("span",[e._v("No hay documentos")])]}}])}),e._v(" "),r("b-modal",{ref:"modal-documents",attrs:{centered:"",title:"Vehiculos asociados al afiliado",size:"lg"}},[r("documents-table",{attrs:{documents:e.currentDocuments}})],1)],1)}),[],!1,null,"1c690bdd",null).exports,p=r(4),h=r.n(p),v=r(20),_=r.n(v);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}var g={name:"searchListAffiliate",components:{vehiclesTable:m},data:function(){return{columns:[{label:"Numero identificaci贸n",field:"identification_number"},{label:"Fecha nacimiento",field:"date_of_birth"},{label:"Afiliado",field:"full_name"},{label:"Direcci贸n",field:"residence_address"},{label:"Telefono",field:"phone_number"},{label:"Correo electronico",field:"email"},{label:"Vehiculos",field:"vehicles"}],currentVehicles:null}},methods:{showModalVehicles:function(e){this.currentVehicles=e,this.$refs["modal-vehicles"].show()},exportData:function(){var e,t=this;return(e=b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/reports-affiliates-excel",t.request,{responseType:"blob"}).then((function(e){_()(e.data,"reporte-afiliados.xlsx")}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){O(o,n,a,i,s,"next",e)}function s(e){O(o,n,a,i,s,"throw",e)}i(void 0)}))})()}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(n.e)("report",["affiliates","request"]))},j={name:"reportAffiliates",metaInfo:{title:"Reporte de afiliados"},components:{searchFormAffiliate:l,searchListAffiliate:Object(c.a)(g,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",{staticClass:"mt-4"},[r("vue-good-table",{attrs:{columns:e.columns,"line-numbers":!1,"search-options":{enabled:!0,placeholder:"Buscar..."},"pagination-options":{enabled:!0,mode:"records"},styleClass:"tableOne vgt-table",rows:e.affiliates},scopedSlots:e._u([{key:"table-row",fn:function(t){return["date_of_birth"==t.column.field?r("span",[e._v("\n           "+e._s(e._f("formatDate")(t.row.date_of_birth))+"\n       ")]):"vehicles"==t.column.field?r("span",[r("b-button",{attrs:{variant:"outline-primary",size:"sm"},on:{click:function(r){return e.showModalVehicles(t.row.vehicles)}}},[e._v("Ver")])],1):e._e()]}}])}),e._v(" "),e.affiliates.length?r("div",{staticClass:"text-right mt-4"},[r("b-button",{attrs:{variant:"success"},on:{click:e.exportData}},[e._v("Exportar "),r("i",{staticClass:"i-File-Excel ml-2"})])],1):e._e(),e._v(" "),r("b-modal",{ref:"modal-vehicles",attrs:{centered:"",title:"Vehiculos asociados al afiliado",size:"lg"}},[r("vehicles-table",{attrs:{vehicles:e.currentVehicles}})],1)],1)}),[],!1,null,"0672e209",null).exports}},k=Object(c.a)(j,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"main-content"},[t("breadcumb",{attrs:{page:"Reporte de afiliados",folder:"reportes"}}),this._v(" "),t("search-form-affiliate"),this._v(" "),t("search-list-affiliate")],1)}),[],!1,null,"586bb7ba",null);t.default=k.exports},20:function(e,t){e.exports=function(e,t,r,n){var a=new Blob(void 0!==n?[n,e]:[e],{type:r||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,t);else{var o=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(a):window.webkitURL.createObjectURL(a),i=document.createElement("a");i.style.display="none",i.href=o,i.setAttribute("download",t),void 0===i.download&&i.setAttribute("target","_blank"),document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(o)}),200)}}}}]);