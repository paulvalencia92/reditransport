(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1470:function(e,t,i){"use strict";i.r(t);var o=i(0);function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var n={name:"Roles",created:function(){this.viewPermissions()||this.$router.push({name:"not-found"}),this._getRoles()},mounted:function(){this.getAbilities()},data:function(){return{fields:[{key:"title",label:"Titulo",sortable:!0},{key:"abilities",label:"Habilidades",sortable:!0},{key:"acciones",label:"Acciones",sortable:!0}],role:{name:"",title:"",abilities:[]},active:!1,roleEdit:{},modal_role:!1}},methods:a(a(a({},Object(o.d)("roles",["SET_ROLE"])),Object(o.b)("roles",["getRoles","createRole","getAbilities","updateRole"])),{},{registerRol:function(){var e=this;this.createRole(this.role).then((function(t){window.openNotification("El rol ha sido creado exitosamente"),e.modal_role=!1,e.role.title=""}))},_getRoles:function(){this.getRoles()},editRole:function(e){this.active=!0,this.SET_ROLE(e),this.roleEdit={id:this._role.id,titulo:this._role.title,habilidades:this._role.abilities.map((function(e){return e.id}))}},_updateRole:function(){var e=this;this.active=!1,this.updateRole(this.roleEdit).then((function(t){"success"==t&&(window.openNotification("Se han asignado las habilidades correctamente"),e._getRoles())}))},viewPermissions:function(){return this.abilities.includes("*")||this.abilities.includes("configuracion-roles-habilidades")}}),computed:a(a(a({},Object(o.e)(["errorMessages"])),Object(o.e)("roles",["roles","_role","skills"])),Object(o.e)("auth",["abilities"]))},s=(i(519),i(2)),c=Object(s.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-container",{staticClass:"bv-example-row",attrs:{fluid:""}},[i("b-row",[i("b-col",{attrs:{md:"12"}},[i("b-button",{attrs:{variant:"primary"},on:{click:function(t){e.modal_role=!0}}},[e._v("Crear rol")])],1),e._v(" "),i("b-col",{staticClass:"col-md-12 mt-2"},[i("b-card",[i("b-card-body",[i("b-table",{attrs:{striped:"",hover:"",items:e.roles,fields:e.fields},scopedSlots:e._u([{key:"cell(abilities)",fn:function(t){return[e._l(t.item.abilities,(function(t){return[i("button",{staticClass:"btn btn-link btn-sm mr-1"},[e._v(e._s(t.title))])]}))]}},{key:"cell(acciones)",fn:function(t){return[i("b-button",{attrs:{size:"xs",pill:"",variant:"primary"},on:{click:function(i){return e.editRole(t.item.id)}}},[e._v("Editar\n              ")])]}}])}),e._v(" "),i("b-modal",{attrs:{size:"xxl","hide-footer":""},scopedSlots:e._u([{key:"modal-header",fn:function(){return[i("h4",{staticClass:"not-margin"},[e._v("Editar")])]},proxy:!0}]),model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e._v(" "),i("div",{staticClass:"con-form p-4"},[i("b-form-group",[i("b-form-input",{attrs:{placeholder:"nombre",type:"text"},model:{value:e.roleEdit.titulo,callback:function(t){e.$set(e.roleEdit,"titulo",t)},expression:"roleEdit.titulo"}})],1),e._v(" "),i("b-form-group",[i("b-row",e._l(e.skills,(function(t,o){return i("b-col",{key:t.id,staticClass:"col-md-3"},[i("b-form-checkbox",{attrs:{name:"habilidades"+t.name,value:t.id},model:{value:e.roleEdit.habilidades,callback:function(t){e.$set(e.roleEdit,"habilidades",t)},expression:"roleEdit.habilidades"}},[e._v(e._s(t.title)+"\n                    ")])],1)})),1)],1)],1),e._v(" "),[i("div",{staticClass:"footer-dialog"},[i("b-button",{attrs:{variant:"primary",size:"sm",block:""},on:{click:e._updateRole}},[e._v("Guardar cambios\n                ")])],1)]],2)],1)],1)],1)],1),e._v(" "),i("b-modal",{attrs:{title:"Registrar Rol",centered:"",size:"sm"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){t.ok;var o=t.cancel;t.hide;return[i("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return o()}}},[e._v("\n        Cancelar\n      ")]),e._v(" "),i("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.registerRol()}}},[e._v("\n        Registrar\n      ")])]}}]),model:{value:e.modal_role,callback:function(t){e.modal_role=t},expression:"modal_role"}},[i("b-form",[e.errorMessages.length?i("CardErrorValidation"):e._e(),e._v(" "),i("b-form-group",{attrs:{label:"Nombre del rol"}},[i("b-form-input",{attrs:{autocomplete:"off"},model:{value:e.role.title,callback:function(t){e.$set(e.role,"title",t)},expression:"role.title"}})],1)],1)],1)],1)}),[],!1,null,"3effaf1c",null);t.default=c.exports},188:function(e,t,i){var o=i(520);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i(13)(o,r);o.locals&&(e.exports=o.locals)},519:function(e,t,i){"use strict";i(188)},520:function(e,t,i){(t=i(8)(!1)).push([e.i,".row[data-v-3effaf1c]{width:100%}.board-paper[data-v-3effaf1c]{border-top-right-radius:15px;border-bottom-right-radius:15px}.form-group[data-v-3effaf1c]{margin-bottom:3rem}",""]),e.exports=t}}]);