(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1441:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),i=r(0),c=(r(5),{name:"tableInventory",props:["items"]}),o=r(2),s=Object(o.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("table",{staticClass:"table table-bordered table-hover table-sm  mt-4"},[e._l(e.items,(function(t){return[r("thead",{staticClass:"bg-light text-white"},["DESCRIPCIÓN"==t.title||"HERRAMIENTAS"==t.title?r("tr",[r("td",[e._v(e._s(t.title))]),e._v(" "),r("td",[e._v("Q")]),e._v(" "),r("td",[e._v("B")]),e._v(" "),r("td",[e._v("M")])]):r("tr",[r("td",[e._v(e._s(t.title))]),e._v(" "),r("td"),e._v(" "),r("td",[e._v("Si")]),e._v(" "),r("td",[e._v("No")])])]),e._v(" "),r("tbody",e._l(t.subitems,(function(t){return r("tr",[t.hasOwnProperty("q")?[r("td",[e._v(e._s(t.name))]),e._v(" "),r("td",[e._v(e._s(t.q))]),e._v(" "),r("td",[e._v(e._s(t.b))]),e._v(" "),r("td",[e._v(e._s(t.m))])]:[r("td",[e._v(e._s(t.name))]),e._v(" "),r("td"),e._v(" "),r("td",[e._v(e._s(t.si))]),e._v(" "),r("td",[e._v(e._s(t.no))])]],2)})),0)]}))],2)}),[],!1,null,"32404b3c",null).exports,l=r(20),u=r.n(l);function d(e,t,r,n,a,i,c){try{var o=e[i](c),s=o.value}catch(e){return void r(e)}o.done?t(s):Promise.resolve(s).then(n,a)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h={name:"list",created:function(){var e=this;this.CHANGE_SUBMIT_STATUS(!1),this.getVehiclesReceiptDeliveries(this.search).then((function(t){e.rows=t}))},components:{tableInventory:s},data:function(){return{fields:[{key:"car_plate",label:"Vehiculo"},{key:"driver",label:"Conductor"},{key:"type",label:"Tipo de vehículo"},{key:"date",label:"Fecha de Entrega"},{key:"extracto_contrato_conductor",label:"Extracto Contrato conductor"},{key:"permiso_acceso",label:"Permiso de acceso"},{key:"license",label:"Licencia de Transito"},{key:"soat"},{key:"contractual"},{key:"extra_contractual"},{key:"permiso_acceso"},{key:"actions",label:"Acciones"}],search:{page:1,from:"",to:"",car_plate:""},currentPage:1,perPage:20,rows:0,currentVehicle:{car_plate:"",driver:""},itemsVehicle:[]}},methods:v(v(v({},Object(i.b)("vehiclereceiptdelivery",["getVehiclesReceiptDeliveries"])),Object(i.d)(["CHANGE_SUBMIT_STATUS","CLEAR_ERRORS"])),{},{searchVehicles:function(){var e=this;this.getVehiclesReceiptDeliveries(this.search).then((function(t){e.rows=t}))},reset:function(){this.search.date="",this.search.car_plate=""},showTable:function(e){this.currentVehicle={car_plate:e.car_plate,driver:e.driver},this.itemsVehicle=e.items,this.$refs["modal-inventory-vehicle"].show()},downloadPdf:function(e){return(t=a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/vehicle-receipt-deliveries/generate-pdf/".concat(e),{responseType:"blob"}).then((function(t){console.log(t.data),u()(t.data,e+"-recibo-entrega.pdf")}));case 2:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function c(e){d(i,n,a,c,o,"next",e)}function o(e){d(i,n,a,c,o,"throw",e)}c(void 0)}))})();var t}}),computed:v(v({},Object(i.e)(["submitStatus"])),Object(i.e)("vehiclereceiptdelivery",["items"])),watch:{currentPage:function(e){var t=this;this.search.page=e,this.getVehiclesReceiptDeliveries(this.search).then((function(e){t.rows=e}))}}},f={name:"list",data:function(){return{}}};function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y={name:"indexReceipt",components:{adminlist:Object(o.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-content"},[r("breadcumb",{attrs:{page:"Lista de inventario entrega vehiculos",folder:"inventario"}}),e._v(" "),r("b-card",{staticClass:"mb-5"},[r("b-row",[r("b-col",{attrs:{md:"4"}},[r("b-form-group",{attrs:{label:"Desde"}},[r("b-form-input",{attrs:{type:"date",placeholder:"Desde"},model:{value:e.search.from,callback:function(t){e.$set(e.search,"from",t)},expression:"search.from"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"4"}},[r("b-form-group",{attrs:{label:"Hasta"}},[r("b-form-input",{attrs:{type:"date",placeholder:"Hasta"},model:{value:e.search.to,callback:function(t){e.$set(e.search,"to",t)},expression:"search.to"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"4"}},[r("b-form-group",{attrs:{label:"Placa"}},[r("b-form-input",{attrs:{placeholder:"Placa"},model:{value:e.search.car_plate,callback:function(t){e.$set(e.search,"car_plate",t)},expression:"search.car_plate"}})],1)],1),e._v(" "),r("b-col",{staticClass:"mt-4",attrs:{md:"4"}},[r("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.searchVehicles()}}},[e._v("Buscar")]),e._v(" "),r("b-button",{attrs:{variant:"outline-danger"},on:{click:function(t){return e.reset()}}},[e._v("Resetear")])],1)],1)],1),e._v(" "),e.items.length?r("b-card",{staticClass:"mt-4"},[r("b-table",{attrs:{striped:"",hover:"",responsive:"",items:e.items,fields:e.fields},scopedSlots:e._u([{key:"cell(date)",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDate")(t.item.date))+"\n      ")]}},{key:"cell(actions)",fn:function(t){return[r("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(r){return e.showTable(t.item)}}},[e._v("Ver tabla")]),e._v(" "),r("b-button",{attrs:{disabled:e.submitStatus,size:"sm",variant:"outline-danger"},on:{click:function(r){return e.downloadPdf(t.item.id)}}},[e._v("\n          Descargar pdf\n        ")])]}}],null,!1,2602801108)}),e._v(" "),r("b-pagination",{attrs:{"total-rows":e.rows,"per-page":e.perPage,"aria-controls":"my-table"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1):e._e(),e._v(" "),r("b-modal",{ref:"modal-inventory-vehicle",attrs:{size:"lg","hide-footer":"",title:"Vehiculo "+e.currentVehicle.car_plate+" - Conductor "+e.currentVehicle.driver}},[r("tableInventory",{attrs:{items:e.itemsVehicle}})],1),e._v(" "),r("b-col",{staticClass:"d-flex justify-content-center",class:{"m-28":!e.submitStatus},attrs:{md:"12"}},[e.submitStatus?r("div",{staticClass:"spinner sm spinner-primary mt-3"}):e._e()])],1)}),[],!1,null,"69bbe8ea",null).exports,driverList:Object(o.a)(f,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"main-content"},[t("breadcumb",{attrs:{page:"Lista de inventario entrega vehiculos",folder:"afiliados"}}),this._v(" "),t("b-row",[t("b-col",{staticClass:"text-right",attrs:{md:"12"}},[t("router-link",{staticClass:"btn btn-link",attrs:{to:{name:"registrar-inventario-vehiculos"}}},[this._v("\n        Registrar entrega vehiculo\n      ")])],1)],1)],1)}),[],!1,null,"f7f03e0a",null).exports},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(i.e)("auth",["role"]))},w=Object(o.a)(y,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",["admin"==this.role?t("adminlist"):"conductor"==this.role?t("driver-list"):this._e()],1)}),[],!1,null,"0c6cb930",null);t.default=w.exports},20:function(e,t){e.exports=function(e,t,r,n){var a=new Blob(void 0!==n?[n,e]:[e],{type:r||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,t);else{var i=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(a):window.webkitURL.createObjectURL(a),c=document.createElement("a");c.style.display="none",c.href=i,c.setAttribute("download",t),void 0===c.download&&c.setAttribute("target","_blank"),document.body.appendChild(c),c.click(),setTimeout((function(){document.body.removeChild(c),window.URL.revokeObjectURL(i)}),200)}}}}]);