(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1450:function(e,t,r){"use strict";r.r(t);var s=r(0);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i={name:"detailsPurshe",components:{formAddFile:r(94).a},props:["purshe"],methods:o(o({},Object(s.b)("purshe",["saveFilePurshe"])),{},{showFormAddFile:function(){this.$refs.modal_add_file.show()},save:function(e){var t=this;this.saveFilePurshe(e).then((function(e){openNotification(),t.$refs.modal_add_file.hide()}))},showHistory:function(){this.$refs.modal_history.show()}}),filters:{status:function(e){return e?"Pagado":"Pendiente"},months:function(e){var t;return 1==e&&(t="Enero"),2==e&&(t="Febrero"),3==e&&(t="Marzo"),4==e&&(t="Abril"),5==e&&(t="Mayo"),6==e&&(t="Junio"),7==e&&(t="Julio"),8==e&&(t="Agosto"),9==e&&(t="Septiembre"),10==e&&(t="Octubre"),11==e&&(t="Noviembre"),12==e&&(t="Diciembre"),t}}},l=r(2);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={name:"index",components:{detailsPurshe:Object(l.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",[r("p",[r("b",[e._v("Dia de pago:")]),e._v(" "+e._s(e.purshe.payment_date))]),e._v(" "),r("p",[r("b",[e._v("Meses:")])]),e._v(" "),e.purshe.months?r("ul",e._l(e.purshe.months,(function(t){return r("li",[e._v("\n        "+e._s(e._f("months")(t))+"\n      ")])})),0):e._e(),e._v(" "),r("p",[r("b",[e._v("Cuotas:")]),e._v(" "+e._s(e.purshe.fee))]),e._v(" "),r("p",[r("b",[e._v("Tipo de pago:")]),e._v(" "+e._s(e.purshe.payment))]),e._v(" "),r("p",[r("b",[e._v("Detalle:")]),e._v(" "+e._s(e.purshe.detail))]),e._v(" "),r("b-button",{attrs:{variant:"primary"}},[e._v(e._s(e.purshe.status_pay))]),e._v(" "),e.purshe.purshe_transaction.length?r("b-button",{attrs:{variant:"outline-light"},on:{click:e.showHistory}},[e._v("Ver historial\n    ")]):e._e(),e._v(" "),r("div",{staticClass:"text-right"}),e._v(" "),r("b-modal",{ref:"modal_add_file",attrs:{centered:"",title:"Agregar factura de pago","hide-footer":""}},[r("form-add-file",{attrs:{pursheId:e.purshe.id},on:{save:e.save}})],1),e._v(" "),r("b-modal",{ref:"modal_history",attrs:{centered:"",title:"Historial","hide-footer":"",size:"lg"}},[e.purshe.purshe_transaction.length?r("div",e._l(e.purshe.purshe_transaction,(function(t){return r("b-list-group",{key:t.id},[r("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center"},[r("p",{staticClass:"m-0"},[r("b",[e._v("Tipo: ")]),e._v(e._s(t.payment)+" - "),r("b",[e._v("Pagado:")]),e._v(" "+e._s(t.cost))]),e._v(" "),t.file?r("a",{staticClass:"btn btn-outline-success",attrs:{download:"",href:"/storage/purshes/"+t.file,variant:"outline-success"}},[e._v("\n              Descargar\n            ")]):e._e()])],1)})),1):e._e()])],1)}),[],!1,null,"1c6bff5e",null).exports},created:function(){this.getMyPurshes(this.status_pay)},data:function(){return{status_pay:"No pago",columns:[{label:"Tipo de pago",field:"type"},{label:"Detalle",field:"detail"},{label:"Fecha de pago",field:"payment_date"},{label:"Estado",field:"status_pay"},{label:"Total a pagar",field:"cost"},{label:"Acciones",field:"actions"}],currentPurshe:null}},methods:u(u({},Object(s.b)("purshe",["getMyPurshes"])),{},{showHistory:function(e){this.currentPurshe=e,this.$refs.modal_history.show()}}),computed:u({},Object(s.e)("purshe",["purshes"])),watch:{status_pay:function(e){this.getMyPurshes(e)}}},f=Object(l.a)(b,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-content"},[r("breadcumb",{attrs:{page:"Listar pagos",folder:"Cartera"}}),e._v(" "),r("b-tabs",{attrs:{"content-class":"mt-3"}},[r("b-tab",{attrs:{title:"No pago",active:""},on:{click:function(t){e.status_pay="No pago"}}}),e._v(" "),r("b-tab",{attrs:{title:"Parcialmente pago"},on:{click:function(t){e.status_pay="Parcialmente pago"}}}),e._v(" "),r("b-tab",{attrs:{title:"Pago completo"},on:{click:function(t){e.status_pay="Pago completo"}}})],1),e._v(" "),r("vue-good-table",{attrs:{columns:e.columns,"line-numbers":!1,"search-options":{enabled:!0,placeholder:"Search this table"},"pagination-options":{enabled:!0,mode:"records"},styleClass:"tableOne vgt-table",rows:e.purshes},scopedSlots:e._u([{key:"table-row",fn:function(t){return["actions"==t.column.field?r("div",[t.row.purshe_transaction.length?r("b-button",{attrs:{variant:"outline-light"},on:{click:function(r){return e.showHistory(t.row)}}},[e._v("Ver\n            historial\n          ")]):e._e()],1):e._e()]}}])}),e._v(" "),r("b-modal",{ref:"modal_history",attrs:{centered:"",title:"Historial","hide-footer":"",size:"lg"}},[e.currentPurshe&&e.currentPurshe.purshe_transaction.length?r("div",e._l(e.currentPurshe.purshe_transaction,(function(t){return r("b-list-group",{key:t.id},[r("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center"},[r("p",{staticClass:"m-0"},[r("b",[e._v("Tipo: ")]),e._v(e._s(t.payment)+" - "),r("b",[e._v("Pagado:")]),e._v(" "+e._s(t.cost))]),e._v(" "),r("p",{staticClass:"m-0"},[e._v("Fecha de pagado : "+e._s(e._f("formatDate")(t.created_at)))]),e._v(" "),t.file?r("a",{staticClass:"btn btn-outline-success",attrs:{download:"",href:"/storage/purshes/"+t.file,variant:"outline-success"}},[e._v("\n              Descargar\n            ")]):e._e()])],1)})),1):e._e()])],1)}),[],!1,null,"84b60adc",null);t.default=f.exports},94:function(e,t,r){"use strict";var s=r(15),a=r(0);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={name:"formAddFile",props:["pursheId","total"],created:function(){this.getUsers()},data:function(){return{file:null,payment:"",cost:0,user_id:""}},components:{ModelSelect:s.ModelSelect},methods:n(n({},Object(a.b)("user",["getUsers"])),{},{submit:function(){var e=buildFormData({id:this.pursheId,file:this.file,payment:this.payment,cost:this.cost,user_id:this.user_id});this.$emit("save",e)}}),computed:n({},Object(a.c)("user",["userOptions"]))},c=r(2),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[r("b-row",[r("b-col",{attrs:{md:"12"}},[r("b-form-group",{attrs:{label:"Anexar factura"}},[r("b-form-file",{attrs:{state:Boolean(e.file),placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"12"}},[r("b-form-group",{attrs:{label:"Tipo de pago"}},[r("b-form-select",{staticClass:"mb-3",model:{value:e.payment,callback:function(t){e.payment=t},expression:"payment"}},[r("b-form-select-option",{attrs:{value:"abono"}},[e._v("Abono")]),e._v(" "),r("b-form-select-option",{attrs:{value:"pago"}},[e._v("Pago")])],1)],1)],1),e._v(" "),r("b-col",{attrs:{md:"12"}},[r("b-form-group",{attrs:{label:"Persona que registra el pago"}},[r("model-select",{attrs:{options:e.userOptions},model:{value:e.user_id,callback:function(t){e.user_id=t},expression:"user_id"}})],1)],1),e._v(" "),r("b-col",{attrs:{md:"12"}},[r("b-form-group",{attrs:{label:"Total"}},[r("b-form-input",{staticClass:"mb-2",attrs:{type:"number",label:"Total"},model:{value:e.cost,callback:function(t){e.cost=t},expression:"cost"}})],1),e._v(" "),parseInt(e.cost)>parseInt(e.total)?r("p",{staticClass:"text-danger"},[e._v("El pago total supera el costo")]):e._e()],1),e._v(" "),r("b-col",{staticClass:"text-right mt-4",attrs:{md:"12"}},[r("b-button",{attrs:{type:"submit",variant:"primary",disabled:!e.file||parseInt(e.cost)>parseInt(e.total)}},[e._v("Guardar\n      ")])],1)],1)],1)}),[],!1,null,"249e022a",null);t.a=u.exports}}]);